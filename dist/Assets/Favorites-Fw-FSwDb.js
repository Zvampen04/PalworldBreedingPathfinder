import{R as E,r as b,T as _,j as t,B as i}from"./index-DodNdWq_.js";import{E as F}from"./ExpandablePaths-CjCnvITg.js";import{C as R}from"./Card-rLJfHKrs.js";import{I as D}from"./Input-d1B5oBn8.js";const M=({favorites:l,selectedFavoriteId:c,highlightedFavoriteId:p,editingFavoriteId:h,editingName:x,combiningFavoriteId:g,handleEditFavoriteName:N,handleSaveFavoriteName:j,handleCancelEditFavoriteName:C,handleCombineWithFavorite:k,handleStartCombining:y,handleCancelCombining:P,handleFavoriteSelect:w,onAddToCollection:$,favoriteRefs:S,onRemoveFavorite:u})=>{const s=b.useContext(_)?.mode==="dark",z=b.useMemo(()=>l.map(e=>{const n=c===e.id,d=p===e.id,o=h===e.id,m={success:!0,start_parent:e.startParent,target_child:e.targetChild,total_paths:1,min_steps:e.steps.filter(a=>a.type!=="start").length,paths:[{type:"single",path:{id:1,steps:e.steps,total_steps:e.steps.filter(a=>a.type!=="start").length}}]};return{fav:e,isSelected:n,isHighlighted:d,isEditing:o,data:m}}),[l,c,p,h]);return t.jsxs("div",{className:`p-8 rounded-xl-std shadow-xl-std transition-all duration-300 ${s?"bg-white/10 backdrop-blur-md border border-white/20":"bg-white/80 backdrop-blur-md border border-gray-200"}`,children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),t.jsx("h2",{className:`text-2xl font-bold mb-4 ${s?"text-accessible-dark":"text-accessible-light"}`,children:"Favorite Paths"}),t.jsx("p",{className:s?"text-accessible-secondary-dark":"text-accessible-secondary-light",children:"Your saved breeding paths appear here. Click items in the sidebar to load them into the calculator."})]}),l.length===0?t.jsx("div",{className:"text-center text-gray-400",children:"No favorites yet."}):z.map(({fav:e,isSelected:n,isHighlighted:d,isEditing:o,data:m})=>t.jsx("div",{ref:a=>S.current[e.id]=a,tabIndex:0,role:"button","aria-label":`Select favorite path ${e.name||`${e.startParent} → ${e.targetChild}`}`,onClick:()=>w(e),className:"mb-6 group cursor-pointer transition-all duration-200",children:t.jsxs(R,{className:n?"border-blue-400 bg-blue-900/20":d?"border-purple-400 bg-purple-900/20":s?"border-white/20 bg-white/5":"border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:`font-semibold group-hover:text-blue-700 ${s?"dark:group-hover:text-purple-300":""} transition-colors duration-200`,children:o?t.jsx(D,{className:"px-2 py-1 rounded border",value:x,onChange:()=>{},autoFocus:!0,theme:s?"dark":"light"}):e.customName?.trim()?e.customName:e.name}),t.jsx("div",{className:"flex gap-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"primary",size:"sm",dark:s,className:s?"text-green-400":"text-green-600",onClick:a=>{a.stopPropagation(),j(e)},"aria-label":`Save new name for favorite path ${e.customName?.trim()?e.customName:e.name}`,children:"Save"}),t.jsx(i,{variant:"secondary",size:"sm",dark:s,className:"text-gray-500",onClick:a=>{a.stopPropagation(),C()},"aria-label":`Cancel editing name for favorite path ${e.customName?.trim()?e.customName:e.name}`,children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"icon",size:"sm",dark:s,className:"ml-2 text-xs text-blue-500 hover:text-blue-700",title:"Edit name",onClick:a=>{a.stopPropagation(),N(e)},"aria-label":`Edit name for favorite path ${e.customName?.trim()?e.customName:e.name}`,children:"✏️"}),t.jsx(i,{variant:"secondary",size:"sm",dark:s,className:"ml-1 text-xs text-purple-600 hover:text-purple-700 border-purple-300 hover:border-purple-400",title:"Combine with another path",onClick:a=>{a.stopPropagation(),y(e)},"aria-label":`Combine favorite path ${e.customName?.trim()?e.customName:e.name} with another`,children:"🔗 Combine"})]})})]}),g===e.id&&t.jsxs("div",{className:"mb-2 p-3 border rounded-lg bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:"Combine with compatible path:"}),(()=>{const a=l.filter(r=>r.id!==e.id&&(r.startParent===e.targetChild||r.targetChild===e.startParent));return a.length===0?t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["No compatible paths found. A compatible path must have:",t.jsxs("ul",{className:"list-disc list-inside mt-1 ml-2",children:[t.jsxs("li",{children:["Start parent matching this path's target child (",e.targetChild,")"]}),t.jsxs("li",{children:["OR target child matching this path's start parent (",e.startParent,")"]})]})]}):t.jsxs("select",{className:`w-full px-3 py-2 rounded border ${s?"border-gray-600 bg-gray-800 text-white":"border-gray-400 bg-white text-black"}`,onChange:r=>{r.stopPropagation(),r.target.value&&k(e,r.target.value)},onClick:r=>r.stopPropagation(),onMouseDown:r=>r.stopPropagation(),defaultValue:"",children:[t.jsx("option",{value:"",disabled:!0,children:"Select compatible path..."}),a.map(r=>t.jsxs("option",{value:r.id,children:[r.customName?.trim()?r.customName:r.name,r.startParent===e.targetChild?` (${r.startParent} → ${r.targetChild})`:` (${r.startParent} → ${r.targetChild})`]},r.id))]})})(),t.jsx("div",{className:"flex justify-end mt-2",children:t.jsx(i,{variant:"secondary",size:"sm",dark:s,className:"text-gray-500 hover:text-gray-700",onClick:a=>{a.stopPropagation(),P()},"aria-label":`Cancel combining favorite path ${e.customName?.trim()?e.customName:e.name}`,children:"Cancel"})})]}),t.jsx(F,{data:m,maxPaths:1,hideSummaryHeader:!0,onAddToCollection:()=>$(e),onRemoveFavorite:u?()=>u(e):void 0})]})},e.id))]})},V=E.memo(M);export{V as default};
