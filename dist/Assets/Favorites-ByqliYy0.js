import{R as B,r as P,T as H,j as t,B as l}from"./index-DUbUAhxO.js";import{E as O}from"./ExpandablePaths-DIIgiVKG.js";import{C as V}from"./Card-CmFwIvdb.js";import{I as Y}from"./Input-Brux66Wn.js";const q=({favorites:o,selectedFavoriteId:h,highlightedFavoriteId:u,editingFavoriteId:b,editingName:w,combiningFavoriteId:$,handleEditFavoriteName:S,handleSaveFavoriteName:z,handleCancelEditFavoriteName:E,handleCombineWithFavorite:_,handleStartCombining:F,handleCancelCombining:R,handleFavoriteSelect:D,onAddToCollection:M,favoriteRefs:T,onRemoveFavorite:x})=>{const d=P.useContext(H),s=(d==null?void 0:d.mode)==="dark",A=P.useMemo(()=>o.map(e=>{const m=h===e.id,c=u===e.id,n=b===e.id,p={success:!0,start_parent:e.startParent,target_child:e.targetChild,total_paths:1,min_steps:e.steps.filter(i=>i.type!=="start").length,paths:[{type:"single",path:{id:1,steps:e.steps,total_steps:e.steps.filter(i=>i.type!=="start").length}}]};return{fav:e,isSelected:m,isHighlighted:c,isEditing:n,data:p}}),[o,h,u,b]);return t.jsxs("div",{className:`p-8 rounded-xl-std shadow-xl-std transition-all duration-300 ${s?"bg-white/10 backdrop-blur-md border border-white/20":"bg-white/80 backdrop-blur-md border border-gray-200"}`,children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),t.jsx("h2",{className:`text-2xl font-bold mb-4 ${s?"text-accessible-dark":"text-accessible-light"}`,children:"Favorite Paths"}),t.jsx("p",{className:s?"text-accessible-secondary-dark":"text-accessible-secondary-light",children:"Your saved breeding paths appear here. Click items in the sidebar to load them into the calculator."})]}),o.length===0?t.jsx("div",{className:"text-center text-gray-400",children:"No favorites yet."}):A.map(({fav:e,isSelected:m,isHighlighted:c,isEditing:n,data:p})=>{var i,g,N,j,C,k;return t.jsx("div",{ref:r=>T.current[e.id]=r,tabIndex:0,role:"button","aria-label":`Select favorite path ${e.name||`${e.startParent} → ${e.targetChild}`}`,onClick:()=>D(e),className:"mb-6 group cursor-pointer transition-all duration-200",children:t.jsxs(V,{className:m?"border-blue-400 bg-blue-900/20":c?"border-purple-400 bg-purple-900/20":s?"border-white/20 bg-white/5":"border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:`font-semibold group-hover:text-blue-700 ${s?"dark:group-hover:text-purple-300":""} transition-colors duration-200`,children:n?t.jsx(Y,{className:"px-2 py-1 rounded border",value:w,onChange:()=>{},autoFocus:!0,theme:s?"dark":"light"}):(i=e.customName)!=null&&i.trim()?e.customName:e.name}),t.jsx("div",{className:"flex gap-2",children:n?t.jsxs(t.Fragment,{children:[t.jsx(l,{variant:"primary",size:"sm",dark:s,className:s?"text-green-400":"text-green-600",onClick:r=>{r.stopPropagation(),z(e)},"aria-label":`Save new name for favorite path ${(g=e.customName)!=null&&g.trim()?e.customName:e.name}`,children:"Save"}),t.jsx(l,{variant:"secondary",size:"sm",dark:s,className:"text-gray-500",onClick:r=>{r.stopPropagation(),E()},"aria-label":`Cancel editing name for favorite path ${(N=e.customName)!=null&&N.trim()?e.customName:e.name}`,children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{variant:"icon",size:"sm",dark:s,className:"ml-2 text-xs text-blue-500 hover:text-blue-700",title:"Edit name",onClick:r=>{r.stopPropagation(),S(e)},"aria-label":`Edit name for favorite path ${(j=e.customName)!=null&&j.trim()?e.customName:e.name}`,children:"✏️"}),t.jsx(l,{variant:"secondary",size:"sm",dark:s,className:"ml-1 text-xs text-purple-600 hover:text-purple-700 border-purple-300 hover:border-purple-400",title:"Combine with another path",onClick:r=>{r.stopPropagation(),F(e)},"aria-label":`Combine favorite path ${(C=e.customName)!=null&&C.trim()?e.customName:e.name} with another`,children:"🔗 Combine"})]})})]}),$===e.id&&t.jsxs("div",{className:"mb-2 p-3 border rounded-lg bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",onClick:r=>r.stopPropagation(),onMouseDown:r=>r.stopPropagation(),children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:"Combine with compatible path:"}),(()=>{const r=o.filter(a=>a.id!==e.id&&(a.startParent===e.targetChild||a.targetChild===e.startParent));return r.length===0?t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["No compatible paths found. A compatible path must have:",t.jsxs("ul",{className:"list-disc list-inside mt-1 ml-2",children:[t.jsxs("li",{children:["Start parent matching this path's target child (",e.targetChild,")"]}),t.jsxs("li",{children:["OR target child matching this path's start parent (",e.startParent,")"]})]})]}):t.jsxs("select",{className:`w-full px-3 py-2 rounded border ${s?"border-gray-600 bg-gray-800 text-white":"border-gray-400 bg-white text-black"}`,onChange:a=>{a.stopPropagation(),a.target.value&&_(e,a.target.value)},onClick:a=>a.stopPropagation(),onMouseDown:a=>a.stopPropagation(),defaultValue:"",children:[t.jsx("option",{value:"",disabled:!0,children:"Select compatible path..."}),r.map(a=>{var y;return t.jsxs("option",{value:a.id,children:[(y=a.customName)!=null&&y.trim()?a.customName:a.name,a.startParent===e.targetChild?` (${a.startParent} → ${a.targetChild})`:` (${a.startParent} → ${a.targetChild})`]},a.id)})]})})(),t.jsx("div",{className:"flex justify-end mt-2",children:t.jsx(l,{variant:"secondary",size:"sm",dark:s,className:"text-gray-500 hover:text-gray-700",onClick:r=>{r.stopPropagation(),R()},"aria-label":`Cancel combining favorite path ${(k=e.customName)!=null&&k.trim()?e.customName:e.name}`,children:"Cancel"})})]}),t.jsx(O,{data:p,maxPaths:1,hideSummaryHeader:!0,onAddToCollection:()=>M(e),onRemoveFavorite:x?()=>x(e):void 0})]})},e.id)})]})},L=B.memo(q);export{L as default};
